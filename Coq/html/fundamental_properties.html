
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module fundamental_properties</title>
<meta name="description" content="Documentation of Coq module fundamental_properties" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module fundamental_properties</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="common.html">common</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="loo_def.html">loo_def</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="chainmail.html">chainmail</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">CpdtTactics</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html">Coq.Logic.FunctionalExtensionality</a></span>.<br/>
<br/>
<div class="doc"><h1> Basic Arithmetic Assertions: </h1> </div>
<br/>
<div class="doc">Law of the Excluded Middle: </div>
<span class="kwd">Parameter</span> <span class="id"><a name="excluded_middle">excluded_middle</a></span> : <span class="kwd">forall</span> <span class="id">P</span>, <span class="id"><a href="fundamental_properties.html#P">P</a></span> \/ ~<span class="id"><a href="fundamental_properties.html#P">P</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="prop_not_and_distr">prop_not_and_distr</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span>, ~(<span class="id"><a href="fundamental_properties.html#A">A</a></span> /\ <span class="id"><a href="fundamental_properties.html#B">B</a></span>) -&gt; ~<span class="id"><a href="fundamental_properties.html#A">A</a></span> \/ ~<span class="id"><a href="fundamental_properties.html#B">B</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#excluded_middle">excluded_middle</a></span> <span class="id">A</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#excluded_middle">excluded_middle</a></span> <span class="id">B</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="prop_implies_not">prop_implies_not</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Prop</span>), (<span class="id"><a href="fundamental_properties.html#A">A</a></span> -&gt; ~<span class="id"><a href="fundamental_properties.html#B">B</a></span>) -&gt; (<span class="id"><a href="fundamental_properties.html#B">B</a></span> -&gt; ~<span class="id"><a href="fundamental_properties.html#A">A</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="prop_not_sat_and_distr">prop_not_sat_and_distr</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ <span class="id">A1</span> <span class="id">A2</span>, ~<span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ◎ σ ⊨ (<span class="id"><a href="chainmail.html#a_and">a_and</a></span> <span class="id"><a href="fundamental_properties.html#A1">A1</a></span> <span class="id"><a href="fundamental_properties.html#A2">A2</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~<span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ◎ σ ⊨ <span class="id"><a href="fundamental_properties.html#A1">A1</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~ <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ◎ σ ⊨ <span class="id"><a href="fundamental_properties.html#A2">A2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="fundamental_properties.html#prop_not_and_distr">prop_not_and_distr</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hcontra</span> <span class="kwd">as</span> [<span class="id">Ha</span> <span class="id">Hb</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forall_exists_neg">forall_exists_neg</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} <span class="id">P</span>, (<span class="kwd">forall</span> (<span class="id">x</span> : <span class="id"><a href="fundamental_properties.html#A">A</a></span>), ~ <span class="id"><a href="fundamental_properties.html#P">P</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ (<span class="id">exists</span> (<span class="id">a</span> : <span class="id"><a href="fundamental_properties.html#A">A</a></span>), <span class="id"><a href="fundamental_properties.html#P">P</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exists_neg_forall">exists_neg_forall</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} (<span class="id">P</span> : <span class="id"><a href="fundamental_properties.html#A">A</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ (<span class="id">exists</span> (<span class="id">a</span> : <span class="id"><a href="fundamental_properties.html#A">A</a></span>), <span class="id"><a href="fundamental_properties.html#P">P</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">a</span> : <span class="id"><a href="fundamental_properties.html#A">A</a></span>), ~ <span class="id"><a href="fundamental_properties.html#P">P</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">intros</span> <span class="id">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">a</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reduction_preserves_well_formed_heap">reduction_preserves_well_formed_heap</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M">M</a></span> ∙ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ1) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ2).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="loo_def.html#heap_wf">heap_wf</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*field&nbsp;assign&nbsp;reduce*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> α0 α) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>; <span class="tactic">rewrite</span> <span class="id">Hneq</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span>; <span class="tactic">subst</span>; <span class="tactic">apply</span> (<span class="id">H7</span> α0); <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H7</span> α <span class="id">o</span> (<span class="id"><a href="loo_def.html#cname">cname</a></span> <span class="id">o</span>)) <span class="kwd">as</span> [<span class="id">CDef</span> <span class="id">Hwf</span>]; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwf</span> <span class="kwd">as</span> [<span class="id">Hwf1</span> <span class="id">Hwf2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwf2</span> <span class="kwd">as</span> [<span class="id">Hwf2</span> <span class="id">Hwf3</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">CDef</span>; <span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">intros</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">f0</span> <span class="id">f</span>) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">destruct</span> <span class="id">f0</span>; <span class="tactic">subst</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html#beq_nat_refl">beq_nat_refl</a></span>; <span class="id">exists</span> (<span class="id"><a href="loo_def.html#v_addr">v_addr</a></span> α'); <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">destruct</span> <span class="id">f0</span>, <span class="id">f</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hneq</span>' : <span class="id">n</span> &lt;&gt; <span class="id">n0</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">intros</span> <span class="id">Hcontra</span>; <span class="tactic">subst</span>; <span class="id">crush</span>| <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.eqb_neq">Nat.eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>'; <span class="tactic">rewrite</span> <span class="id">Hneq</span>'; <span class="tactic">auto</span>]].<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*new&nbsp;object&nbsp;initialization*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> α0 α) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>; <span class="tactic">rewrite</span> <span class="id">Hneq</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span>; <span class="tactic">subst</span>; <span class="tactic">apply</span> (<span class="id">H8</span> α0); <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">CDef</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">intros</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hin</span> : <span class="id">fMap</span> <span class="id">f</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; ~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">f</span> (<span class="id"><a href="loo_def.html#c_flds">c_flds</a></span> <span class="id">CDef</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">auto</span>|].<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id">fMap</span> <span class="id">f</span>) <span class="kwd">as</span> <span class="id">res</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">res</span> <span class="kwd">as</span> [<span class="id">y</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">contradiction</span> <span class="id">Hin</span>; <span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H7</span> <span class="id">f</span> <span class="id">y</span>) <span class="kwd">as</span> [<span class="id">v</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">unfold</span> <span class="id"><a href="common.html#compose">compose</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Heqres</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="linking_unique">linking_unique</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> <span class="id">M</span>, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ∘ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ≜ <span class="id"><a href="fundamental_properties.html#M">M</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span>', <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ∘ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ≜ <span class="id">M</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">M</span>' = <span class="id"><a href="fundamental_properties.html#M">M</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> <span class="id">M</span> <span class="id">Hlink1</span> <span class="id">M</span>' <span class="id">Hlink2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hlink1</span>; <span class="tactic">inversion</span> <span class="id">Hlink2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">link_unique_auto</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H1</span> : ?<span class="id">M1</span> ∘ ?<span class="id">M2</span> ≜ ?<span class="id">M</span>, <span class="id">H2</span> : ?<span class="id">M1</span> ∘ ?<span class="id">M2</span> ≜ ?<span class="id">M</span>' |-<span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">M</span>' = <span class="id">M</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#linking_unique">linking_unique</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>|<span class="tactic">subst</span> <span class="id">M</span>']<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">reduce_heap_wf_auto</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">Hred</span> : ?<span class="id">M</span> ∙ ?σ1 ⤳ ?σ2 |- χ<span class="id">_wf</span> ?<span class="id">M</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> ?σ2)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#reduction_preserves_well_formed_heap">reduction_preserves_well_formed_heap</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reductions_preserves_heap_wf">reductions_preserves_heap_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳… σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span>, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ∘ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ≜ <span class="id"><a href="fundamental_properties.html#M">M</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ1) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ2).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">link_unique_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reduce_heap_wf_auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">reduces_heap_wf_auto</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">Hred</span> : ?<span class="id">M1</span> ⦂ ?<span class="id">M2</span> ⦿ ?σ1 ⤳… ?σ2 |- χ<span class="id">_wf</span> ?<span class="id">M</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> ?σ2)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#reductions_preserves_heap_wf">reductions_preserves_heap_wf</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reduction_preserves_heap_wf">pair_reduction_preserves_heap_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span>, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ∘ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ≜ <span class="id"><a href="fundamental_properties.html#M">M</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ1) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ2).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">link_unique_auto</span>.<br/>
&nbsp;&nbsp;<span class="id">reduce_heap_wf_auto</span>.<br/>
&nbsp;&nbsp;<span class="id">reduces_heap_wf_auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">pair_reduce_heap_wf_auto</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">Hred</span> : ?<span class="id">M1</span> ⦂ ?<span class="id">M2</span> ⦿ ?σ1 ⤳ ?σ2 |- χ<span class="id">_wf</span> ?<span class="id">M</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> ?σ2)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#pair_reduction_preserves_heap_wf">pair_reduction_preserves_heap_wf</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reductions_preserves_heap_wf">pair_reductions_preserves_heap_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳⋆ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span>, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ∘ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ≜ <span class="id"><a href="fundamental_properties.html#M">M</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ1) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ2).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> <span class="id">pair_reduce_heap_wf_auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHHred</span>; <span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pair_reduce_heap_wf_auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">pair_reduces_heap_wf_auto</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">Hred</span> : ?<span class="id">M1</span> ⦂ ?<span class="id">M2</span> ⦿ ?σ1 ⤳⋆ ?σ2 |- χ<span class="id">_wf</span> ?<span class="id">M</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> ?σ2)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#pair_reductions_preserves_heap_wf">pair_reductions_preserves_heap_wf</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="M_wf_ObjectDefn">M_wf_ObjectDefn</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span>, <span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#M">M</a></span> <span class="id"><a href="loo_def.html#ObjectName">ObjectName</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="loo_def.html#ObjectDefn">ObjectDefn</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M</span> <span class="id">Hwf</span>; <span class="tactic">inversion</span> <span class="id">Hwf</span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">obj_defn_rewrite</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> ?<span class="id">M</span> |- <span class="id">context</span>[?<span class="id">M</span> <span class="id"><a href="loo_def.html#ObjectName">ObjectName</a></span>]] =&gt; <span class="tactic">rewrite</span> (<span class="id"><a href="fundamental_properties.html#M_wf_ObjectDefn">M_wf_ObjectDefn</a></span> <span class="id">M</span> <span class="id">H</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">empty_auto</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span> [<span class="id"><a href="common.html#empty">empty</a></span> <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#empty">empty</a></span>, <span class="id"><a href="common.html#t_empty">t_empty</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">crush</span><br/>
&nbsp;&nbsp;| [|- <span class="id">context</span> [<span class="id"><a href="common.html#empty">empty</a></span> <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#empty">empty</a></span>, <span class="id"><a href="common.html#t_empty">t_empty</a></span>; <span class="id">crush</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">update_auto</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : (<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">b</span>' |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;| [<span class="id">Hneq</span> : ?<span class="id">a</span> &lt;&gt; ?<span class="id">a</span>', <span class="id">H</span> : (<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">Hneq</span> : ?<span class="id">a</span>' &lt;&gt; ?<span class="id">a</span>, <span class="id">H</span> : (<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : (<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">b</span>' |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Heq</span> := <span class="tactic">fresh</span> "<span class="id">Heq</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hneq</span> := <span class="tactic">fresh</span> "<span class="id">Hneq</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">a</span>' <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span> <span class="kwd">in</span> <span class="id">H</span>]<br/>
<br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[(<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>]  |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">Hneq</span> : ?<span class="id">a</span> &lt;&gt; ?<span class="id">a</span>', <span class="id">H</span> : <span class="id">context</span>[(<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>']  |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">Hneq</span> : ?<span class="id">a</span>' &lt;&gt; ?<span class="id">a</span>, <span class="id">H</span> : <span class="id">context</span>[(<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>']  |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[(<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>']  |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Heq</span> := <span class="tactic">fresh</span> "<span class="id">Heq</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hneq</span> := <span class="tactic">fresh</span> "<span class="id">Hneq</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">a</span>' <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span> <span class="kwd">in</span> <span class="id">H</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;| [|- (<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span><br/>
&nbsp;&nbsp;| [<span class="id">Hneq</span> : ?<span class="id">a</span> &lt;&gt; ?<span class="id">a</span>' |- (<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span><br/>
&nbsp;&nbsp;| [<span class="id">Hneq</span> : ?<span class="id">a</span>' &lt;&gt; ?<span class="id">a</span> |- (<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span><br/>
&nbsp;&nbsp;| [|- (<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">b</span>'] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Heq</span> := <span class="tactic">fresh</span> "<span class="id">Heq</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hneq</span> := <span class="tactic">fresh</span> "<span class="id">Hneq</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">a</span>' <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;| [|- <span class="id">context</span>[(<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>]] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span><br/>
&nbsp;&nbsp;| [<span class="id">Hneq</span> : ?<span class="id">a</span> &lt;&gt; ?<span class="id">a</span>' |- <span class="id">context</span>[(<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>']] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span><br/>
&nbsp;&nbsp;| [<span class="id">Hneq</span> : ?<span class="id">a</span>' &lt;&gt; ?<span class="id">a</span> |- <span class="id">context</span>[(<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>']] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span><br/>
&nbsp;&nbsp;| [|- <span class="id">context</span>[(<span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> <span class="id">_</span> <span class="id">_</span>) ?<span class="id">a</span>']] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Heq</span> := <span class="tactic">fresh</span> "<span class="id">Heq</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hneq</span> := <span class="tactic">fresh</span> "<span class="id">Hneq</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">a</span>' <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="tactic">rewrite</span> <span class="id"><a href="common.html#eqb_refl">eqb_refl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hneq</span>]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">pmap_simpl</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">try</span> <span class="id">empty_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">update_auto</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="initial_heap_wf">initial_heap_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> σ, <span class="id"><a href="chainmail.html#initial">initial</a></span> σ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span>, <span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="tactic">intros</span> σ <span class="id">Hinit</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hinit</span> <span class="kwd">as</span> [α <span class="id">Hinit</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hinit</span> <span class="kwd">as</span> [ϕ <span class="id">Hinit</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="loo_def.html#heap_wf">heap_wf</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">update_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> <span class="id"><a href="loo_def.html#ObjectDefn">ObjectDefn</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">obj_defn_rewrite</span>; <span class="tactic">auto</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">empty_auto</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">initial_heap_wf_auto</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id"><a href="chainmail.html#initial">initial</a></span> ?σ |- χ<span class="id">_wf</span> ?<span class="id">M</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> ?σ)] =&gt; <span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#initial_heap_wf">initial_heap_wf</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="linked_wf">linked_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> <span class="id">M</span>, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ∘ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ≜ <span class="id"><a href="fundamental_properties.html#M">M</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> <span class="id"><a href="fundamental_properties.html#M">M</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> <span class="id">M</span> <span class="id">Hlink</span> <span class="id">Hwf1</span> <span class="id">Hwf2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hlink</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hwf1</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hwf2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="loo_def.html#module_wf">module_wf</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="common.html#extend">extend</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">M1</span> <span class="id"><a href="loo_def.html#ObjectName">ObjectName</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="common.html#extend">extend</a></span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id">M1</span> <span class="id">C</span>) <span class="kwd">as</span> <span class="id">x</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">linking_wf</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H1</span> : <span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> ?<span class="id">M1</span>, <span class="id">H2</span> : <span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> ?<span class="id">M2</span>, <span class="id">Hlink</span> : ?<span class="id">M1</span> ∘ ?<span class="id">M2</span> ≜ ?<span class="id">M</span> |- <span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> ?<span class="id">M</span>] =&gt; <span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#linked_wf">linked_wf</a></span>; <span class="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="arising_heap_wf">arising_heap_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ, <span class="id"><a href="chainmail.html#arising">arising</a></span> <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> σ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loo_def.html#M_wf">M_wf</a></span> <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span>, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ∘ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ≜ <span class="id"><a href="fundamental_properties.html#M">M</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ<span class="id">_wf</span> <span class="id"><a href="fundamental_properties.html#M">M</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">pair_reduces_heap_wf_auto</span>.<br/>
&nbsp;&nbsp;<span class="id">initial_heap_wf_auto</span>.<br/>
&nbsp;&nbsp;<span class="id">linking_wf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exists_dom_finite">exists_dom_finite</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">d</span>, <span class="id"><a href="chainmail.html#dom">dom</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClass</span> <span class="id">m</span> <span class="id">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="tactic">auto</span>|].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHHfinite</span> <span class="kwd">as</span> [<span class="id">d</span> <span class="id">Hdom</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#excluded_middle">excluded_middle</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">a</span> <span class="id">d</span>)) <span class="kwd">as</span> [<span class="id">Hin</span>|<span class="id">Hnin</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> <span class="id">d</span>|<span class="id">exists</span> (<span class="id">a</span>::<span class="id">d</span>)]; <span class="tactic">auto</span>.<br/>
<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="update_neq_empty">update_neq_empty</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>}`{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">a</span> : <span class="id"><a href="fundamental_properties.html#A">A</a></span>)(<span class="id">b</span> : <span class="id"><a href="fundamental_properties.html#B">B</a></span>) <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#update">update</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> &lt;&gt; <span class="id"><a href="common.html#empty">empty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">intros</span> <span class="id">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Heq</span> : <span class="id"><a href="common.html#update">update</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">m</span> <span class="id">a</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> <span class="id">Hcontra</span>; <span class="id">pmap_simpl</span>|<span class="id">pmap_simpl</span>].<br/>
&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">update_empty_contra</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> ?<span class="id">b</span> ?<span class="id">m</span> = <span class="id"><a href="common.html#empty">empty</a></span> |- <span class="id">_</span>] =&gt; <span class="id">contradiction</span> (<span class="id"><a href="fundamental_properties.html#update_neq_empty">update_neq_empty</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id"><a href="common.html#empty">empty</a></span> = <span class="id"><a href="common.html#update">update</a></span> ?<span class="id">a</span> ?<span class="id">b</span> ?<span class="id">m</span> |- <span class="id">_</span>] =&gt; <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">contradiction</span> (<span class="id"><a href="fundamental_properties.html#update_neq_empty">update_neq_empty</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dom_empty_is_nil">dom_empty_is_nil</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>}`{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>) <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#dom">dom</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#m">m</a></span> = <span class="id"><a href="common.html#empty">empty</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#d">d</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClass</span> <span class="id">m</span> <span class="id">d</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">update_empty_contra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="partial_map_dec">partial_map_dec</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} <span class="id">a</span> (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>), {<span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span>} + {<span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">m</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">b</span>|]; [<span class="id">left</span>; <span class="id">exists</span> <span class="id">b</span>|]; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="zip_length_exists">zip_length_exists</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} (<span class="id">l1</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>) (<span class="id">l2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="fundamental_properties.html#l1">l1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id"><a href="fundamental_properties.html#l2">l2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">z</span>, <span class="id"><a href="chainmail.html#zip">zip</a></span> <span class="id"><a href="fundamental_properties.html#l1">l1</a></span> <span class="id"><a href="fundamental_properties.html#l2">l2</a></span> <span class="id"><a href="fundamental_properties.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">l1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l1</span> <span class="kwd">as</span> [|<span class="id">a</span> <span class="id">l</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">auto</span>|<span class="tactic">inversion</span> <span class="id">H</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l2</span> <span class="kwd">as</span> [|<span class="id">b</span> <span class="id">l</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">inversion</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHl</span> <span class="id">l</span>') <span class="kwd">as</span> [<span class="id">z</span> <span class="id">Hzip</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> ((<span class="id">a</span>,<span class="id">b</span>)::<span class="id">z</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fresh_in_empty">fresh_in_empty</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} <span class="id">x</span>, @<span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="common.html#empty">empty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">pmap_simpl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">fresh_in_empty</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="map_implies_in_dom">map_implies_in_dom</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>) <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#dom">dom</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span>, <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClass</span> <span class="id">m</span> <span class="id">d</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">pmap_simpl</span>; <span class="id">crush</span>; <span class="tactic">eauto</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="in_dom_implies_in_map">in_dom_implies_in_map</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>) <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#dom">dom</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClass</span> <span class="id">m</span> <span class="id">d</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">eexists</span>; <span class="tactic">eauto</span>].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">apply</span> <span class="id"><a href="common.html#eqb_neq">eqb_neq</a></span> <span class="kwd">in</span> <span class="id">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">eapply</span> <span class="id">IHHdom</span>; <span class="tactic">eauto</span>].<br/>
<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fresh_in_map_not_in_dom">fresh_in_map_not_in_dom</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>) <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#dom">dom</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> &lt;-&gt; ~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">m</span> <span class="id">d</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">a</span> <span class="id">y</span>) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="tactic">apply</span> (<span class="id">H0</span> <span class="id">y</span> <span class="id">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> (<span class="id">H0</span> <span class="id">y</span> <span class="id">a0</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>; <span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="fundamental_properties.html#map_implies_in_dom">map_implies_in_dom</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id">a1</span>:=<span class="id">y</span>)(<span class="id">b0</span>:=<span class="id">a0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">in</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">destruct</span> (<span class="id">H0</span> <span class="id">x</span> <span class="id">b</span>); <span class="id">pmap_simpl</span>; <span class="tactic">auto</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#in_dom_implies_in_map">in_dom_implies_in_map</a></span> <span class="id">m</span> <span class="id">d</span>) <span class="kwd">with</span> (<span class="id">a</span>:=<span class="id">x</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">x</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradiction</span> (<span class="id">H0</span> <span class="id">a</span> <span class="id">b</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>; <span class="id">pmap_simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">contradiction</span> (<span class="id">H0</span> <span class="id">x</span> <span class="id">x0</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>; <span class="id">pmap_simpl</span>].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">pmap_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">contradiction</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hnin</span> : ~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">y</span> <span class="id">d</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">intros</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> &lt;- <span class="id">IHHdom</span> <span class="kwd">in</span> <span class="id">Hnin</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="kwd">in</span> <span class="id">Hnin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hnin</span> <span class="kwd">in</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="lt_map">lt_map</a></span> {<span class="id">A</span> : <span class="kwd">Type</span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id">A</span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="lt_empty">lt_empty</a></span> : <span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span> 0 <span class="id"><a href="common.html#empty">empty</a></span><br/>
| <span class="id"><a name="lt_update1">lt_update1</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">b</span> <span class="id">m</span> <span class="id">n</span>', <span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span> <span class="id">n</span>' <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#n">n</a></span> &lt; <span class="id">n</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span> <span class="id">n</span>' (<span class="id"><a href="common.html#update">update</a></span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span>) <span class="id"><a href="fundamental_properties.html#b">b</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>)<br/>
| <span class="id"><a name="lt_update2">lt_update2</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">b</span> <span class="id">m</span> <span class="id">n</span>', <span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span> <span class="id">n</span>' <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">n</span>' &lt;= <span class="id"><a href="fundamental_properties.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span>) (<span class="id"><a href="common.html#update">update</a></span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span>) <span class="id"><a href="fundamental_properties.html#b">b</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>).<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exists_limit_for_finite_map">exists_limit_for_finite_map</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n</span>, <span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">m</span> <span class="id">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> 0; <span class="tactic">auto</span>|<span class="tactic">destruct</span> <span class="id">IHHfinite</span> <span class="kwd">as</span> [<span class="id">n</span>]].<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">n</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span> <span class="id">n</span> <span class="id">n</span>') <span class="kwd">as</span> [<span class="id">Hle</span>|<span class="id">Hlt</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>'); <span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_update2">lt_update2</a></span>|<span class="id">exists</span> <span class="id">n</span>; <span class="tactic">apply</span> <span class="id"><a href="fundamental_properties.html#lt_update1">lt_update1</a></span>]; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lt_map_implies_var_lt">lt_map_implies_var_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} <span class="id">n</span> (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>' <span class="id">b</span>, <span class="id"><a href="fundamental_properties.html#m">m</a></span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n</span>') = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">n</span>' &lt; <span class="id"><a href="fundamental_properties.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">n</span> <span class="id">m</span> <span class="id">Hlt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hlt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">n</span>'0 <span class="id">n</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">H0</span>; [<span class="tactic">eauto</span>|<span class="id">crush</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">n</span>'0 <span class="id">n</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="common.html#update">update</a></span>, <span class="id"><a href="common.html#t_update">t_update</a></span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span> <span class="kwd">in</span> <span class="id">H0</span>; [<span class="tactic">eauto</span>|<span class="id">crush</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHlt</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lt_fresh_in_map">lt_fresh_in_map</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} <span class="id">n</span> (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#lt_map">lt_map</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt; <span class="kwd">forall</span> <span class="id">n</span>', <span class="id"><a href="fundamental_properties.html#n">n</a></span> &lt;= <span class="id">n</span>' -&gt; <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n</span>') <span class="id"><a href="fundamental_properties.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">n</span> <span class="id">m</span> <span class="id">Hlt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hlt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="kwd">in</span> *;    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">y</span> <span class="kwd">as</span> [<span class="id">n</span>''].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_map_implies_var_lt">lt_map_implies_var_lt</a></span> <span class="kwd">in</span> <span class="id">Hlt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fresh_var_finite">fresh_var_finite</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>, <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#exists_limit_for_finite_map">exists_limit_for_finite_map</a></span> <span class="id">m</span>) <span class="kwd">as</span> [<span class="id">n</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_fresh_in_map">lt_fresh_in_map</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fresh_var_finite2">fresh_var_finite2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} (<span class="id">m1</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">m2</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>), <span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>, <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#exists_limit_for_finite_map">exists_limit_for_finite_map</a></span> <span class="id">m1</span>) <span class="kwd">as</span> [<span class="id">n1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#exists_limit_for_finite_map">exists_limit_for_finite_map</a></span> <span class="id">m2</span>) <span class="kwd">as</span> [<span class="id">n2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span> <span class="id">n1</span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">Hle</span>|<span class="id">Hlt</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n2</span>)|<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n1</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_fresh_in_map">lt_fresh_in_map</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="lt_var">lt_var</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="common.html#var">var</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="lt_bind">lt_bind</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>', <span class="id">n</span>' &lt; <span class="id"><a href="fundamental_properties.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#lt_var">lt_var</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n</span>').<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="fundamental_properties.html#lt_var">lt_var</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exists_limit_var">exists_limit_var</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">exists</span> <span class="id">n</span>, <span class="id"><a href="fundamental_properties.html#lt_var">lt_var</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [<span class="id">n</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exists_limit_for_list">exists_limit_for_list</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span>, <span class="id">exists</span> <span class="id">n</span>, <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#lt_var">lt_var</a></span> <span class="id"><a href="fundamental_properties.html#n">n</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">l</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [|<span class="id">x</span> <span class="id">l</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> 0; <span class="id">crush</span>|<span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [<span class="id">n</span>']].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHl</span>' <span class="kwd">as</span> [<span class="id">n</span> <span class="id">Hltx</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span> <span class="id">n</span> <span class="id">n</span>') <span class="kwd">as</span> [<span class="id">Hle</span>|<span class="id">Hlt</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>')|<span class="id">exists</span> <span class="id">n</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="id">crush</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hltx</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="id">crush</span>.<br/>
&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fresh_var_finite3">fresh_var_finite3</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} (<span class="id">m1</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">m2</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>), <span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">d</span>, <span class="id">exists</span> <span class="id">x</span>, <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#m2">m2</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="fundamental_properties.html#x">x</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#exists_limit_for_finite_map">exists_limit_for_finite_map</a></span> <span class="id">m1</span>) <span class="kwd">as</span> [<span class="id">n1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#exists_limit_for_finite_map">exists_limit_for_finite_map</a></span> <span class="id">m2</span>) <span class="kwd">as</span> [<span class="id">n2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#exists_limit_for_list">exists_limit_for_list</a></span> <span class="id">d</span>) <span class="kwd">as</span> [<span class="id">n3</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span> <span class="id">n1</span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">Hle1</span>|<span class="id">Hlt1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span> <span class="id">n1</span> <span class="id">n3</span>) <span class="kwd">as</span> [<span class="id">Hle2</span>|<span class="id">Hlt2</span>].<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span> <span class="id">n3</span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">Hle3</span>|<span class="id">Hlt3</span>];<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n2</span>); <span class="tactic">split</span>; [|<span class="tactic">split</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_fresh_in_map">lt_fresh_in_map</a></span>; <span class="tactic">eauto</span>; <span class="id">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hcontra</span>; <span class="id">crush</span>];<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n3</span>); <span class="tactic">split</span>; [|<span class="tactic">split</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_fresh_in_map">lt_fresh_in_map</a></span>; <span class="tactic">eauto</span>; <span class="id">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hcontra</span>; <span class="id">crush</span>].<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span> <span class="id">n3</span> <span class="id">n2</span>) <span class="kwd">as</span> [<span class="id">Hle3</span>|<span class="id">Hlt3</span>];<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n2</span>); <span class="tactic">split</span>; [|<span class="tactic">split</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_fresh_in_map">lt_fresh_in_map</a></span>; <span class="tactic">eauto</span>; <span class="id">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hcontra</span>; <span class="id">crush</span>];<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n3</span>); <span class="tactic">split</span>; [|<span class="tactic">split</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_fresh_in_map">lt_fresh_in_map</a></span>; <span class="tactic">eauto</span>; <span class="id">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hcontra</span>; <span class="id">crush</span>].<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Compare_dec.html#le_lt_dec">le_lt_dec</a></span> <span class="id">n1</span> <span class="id">n3</span>) <span class="kwd">as</span> [<span class="id">Hle2</span>|<span class="id">Hlt2</span>];<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n1</span>); <span class="tactic">split</span>; [|<span class="tactic">split</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_fresh_in_map">lt_fresh_in_map</a></span>; <span class="tactic">eauto</span>; <span class="id">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hcontra</span>; <span class="id">crush</span>];<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">exists</span> (<span class="id"><a href="common.html#bind">bind</a></span> <span class="id">n3</span>); <span class="tactic">split</span>; [|<span class="tactic">split</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#lt_fresh_in_map">lt_fresh_in_map</a></span>; <span class="tactic">eauto</span>; <span class="id">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">Hcontra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hcontra</span>; <span class="id">crush</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dom_implies_finite">dom_implies_finite</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>) <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#dom">dom</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">m</span> <span class="id">d</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<div class="doc">TODO: </div>
<span class="kwd">Parameter</span> <span class="id"><a name="fresh_var_list_finite">fresh_var_list_finite</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> : <span class="kwd">Type</span>} (<span class="id">m1</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>) (<span class="id">d</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="common.html#var">var</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#dom">dom</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">m2</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="common.html#var">var</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>) <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">d</span>' <span class="id">D</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">z</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="fundamental_properties.html#z">z</a></span> <span class="id">d</span>' -&gt; <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#z">z</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">z</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="fundamental_properties.html#z">z</a></span> <span class="id">d</span>' -&gt; <span class="id"><a href="chainmail.html#fresh_in_map">fresh_in_map</a></span> <span class="id"><a href="fundamental_properties.html#z">z</a></span> <span class="id"><a href="fundamental_properties.html#m2">m2</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">z</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="fundamental_properties.html#z">z</a></span> <span class="id">d</span>' -&gt; ~ <span class="id"><a href="chainmail.html#in_stmt">in_stmt</a></span> <span class="id"><a href="fundamental_properties.html#z">z</a></span> <span class="id"><a href="fundamental_properties.html#s">s</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#unique">unique</a></span> <span class="id">d</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#zip">zip</a></span> <span class="id">d</span>' <span class="id"><a href="fundamental_properties.html#d">d</a></span> <span class="id"><a href="fundamental_properties.html#D">D</a></span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">finite_auto</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[<span class="id">finite_</span>σ <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">finite_</span>σ <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[<span class="id">finite_</span>ψ <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">finite_</span>ψ <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[<span class="id">finite_</span>ϕ <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">finite_</span>ϕ <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span>[<span class="id">finite_</span>σ <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id">finite_</span>σ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span>[<span class="id">finite_</span>ψ <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id">finite_</span>ψ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span>[<span class="id">finite_</span>ϕ <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id">finite_</span>ϕ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">not_stuck_auto</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[<span class="id">not_stuck_</span>σ <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">not_stuck_</span>σ <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[<span class="id">not_stuck_</span>ϕ <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">not_stuck_</span>ϕ <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span>[<span class="id">not_stuck_</span>σ <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id">not_stuck_</span>σ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span>[<span class="id">not_stuck_</span>ϕ <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id">not_stuck_</span>ϕ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">waiting_auto</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[<span class="id">waiting_</span>σ <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">waiting_</span>σ <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[<span class="id">waiting_</span>ψ <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">waiting_</span>ψ <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id">context</span>[<span class="id">waiting_</span>ϕ <span class="id">_</span>] |- <span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">waiting_</span>ϕ <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span>[<span class="id">waiting_</span>σ <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id">waiting_</span>σ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span>[<span class="id">waiting_</span>ψ <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id">waiting_</span>ψ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span>[<span class="id">waiting_</span>ϕ <span class="id">_</span>]] =&gt; <span class="tactic">unfold</span> <span class="id">waiting_</span>ϕ<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dom_unique">dom_unique</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>) <span class="id">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#dom">dom</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="chainmail.html#unique">unique</a></span> <span class="id"><a href="fundamental_properties.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClass</span> <span class="id">m</span> <span class="id">d</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="adaptation_exists">adaptation_exists</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> σ1 σ2, <span class="id">finite_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> χ1 ϕ1 ψ1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;χ2 ϕ2 ψ2,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ1 = (χ1, ϕ1::ψ1) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ2 = (χ2, ϕ2::ψ2) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> σ, σ1 ◁ σ2 ≜ σ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not_stuck_</span>σ, <span class="id">not_stuck_</span>ϕ <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [ϕ' <span class="id">Hnstuck</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hnstuck</span> <span class="kwd">as</span> [ψ' <span class="id">Hnstuck</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andDestruct</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hb</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Ha</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="loo_def.html#vMap">vMap</a></span> ϕ1) <span class="kwd">as</span> β1.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#exists_dom_finite">exists_dom_finite</a></span> β1) <span class="kwd">as</span> [<span class="id">zs</span>]; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="id">finite_auto</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>; <span class="id">crush</span>|].<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="loo_def.html#vMap">vMap</a></span> ϕ') <span class="kwd">as</span> β2.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#fresh_var_list_finite">fresh_var_list_finite</a></span> β1 <span class="id">zs</span> <span class="id">H1</span> β2 <span class="id">s</span>) <span class="kwd">as</span> [<span class="id">zs</span>' <span class="id">Hfresh</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">finite_auto</span>; <span class="id">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">destruct</span> <span class="id">Hfresh</span> <span class="kwd">as</span> [<span class="id">D</span> <span class="id">Hfresh</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andDestruct</span>].<br/>
<br/>
&nbsp;&nbsp;(<span class="id">exists</span> (χ2, (<span class="id"><a href="loo_def.html#frm">frm</a></span> (<span class="id"><a href="chainmail.html#updates">updates</a></span> <span class="id">D</span> β1 β2) (<span class="id"><a href="loo_def.html#c_stmt">c_stmt</a></span> (<span class="id"><a href="chainmail.html#rename_s">rename_s</a></span> <span class="id">s</span> <span class="id">D</span>)))::ψ')).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="chainmail.html#a_adapt">a_adapt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ϕ:=ϕ1)(ϕ':=ϕ')(<span class="id">contn</span>:=<span class="id"><a href="loo_def.html#contn">contn</a></span> ϕ1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(β:=β1)(β':=β2)(β'':=<span class="id"><a href="chainmail.html#updates">updates</a></span> <span class="id">D</span> β1 β2)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">zs</span>:=<span class="id">zs</span>)(<span class="id">zs</span>':=<span class="id">zs</span>')(<span class="id">s</span>:=<span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s</span>':=<span class="id"><a href="chainmail.html#rename_s">rename_s</a></span> <span class="id">s</span> <span class="id">D</span>)(<span class="id">Zs</span>:=<span class="id">D</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">crush</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> ϕ1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> ϕ';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="fundamental_properties.html#dom_unique">dom_unique</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="finite_normal_form">finite_normal_form</a></span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id">A</span> <span class="id">B</span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="norm_empty">norm_empty</a></span> : <span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id"><a href="common.html#empty">empty</a></span><br/>
| <span class="id"><a name="norm_update">norm_update</a></span> : <span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">m</span>, <span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> (<span class="id"><a href="common.html#update">update</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>).<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compose_normal_form">compose_normal_form</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>}`{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>}`{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>} (<span class="id">m1</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">C</span> : <span class="kwd">Type</span>} (<span class="id">m2</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span> <span class="id"><a href="fundamental_properties.html#C">C</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m3</span>, <span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id"><a href="fundamental_properties.html#m3">m3</a></span> /\ <span class="id"><a href="fundamental_properties.html#m3">m3</a></span> = <span class="id"><a href="common.html#compose">compose</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> <span class="id"><a href="fundamental_properties.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClassA</span> <span class="id">HeqClassB</span> <span class="id">m1</span> <span class="id">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="common.html#empty">empty</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHHnorm</span> <span class="id">C</span> <span class="id">m2</span>) <span class="kwd">as</span> [<span class="id">m3</span> <span class="id">IH</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IH</span> <span class="kwd">as</span> [<span class="id">IH1</span> <span class="id">IH2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#partial_map_dec">partial_map_dec</a></span> <span class="id">b</span> <span class="id">m2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">HSome</span>|<span class="id">HNone</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">destruct</span> <span class="id">HSome</span> <span class="kwd">as</span> [<span class="id">c</span> <span class="id">HSome</span>]|].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="common.html#compose">compose</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="common.html#update">update</a></span> <span class="id">a</span> <span class="id">c</span> <span class="id">m3</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">apply</span> <span class="id"><a href="fundamental_properties.html#norm_update">norm_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">m3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="common.html#compose">compose</a></span>; [<span class="tactic">auto</span>|<span class="id">crush</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality">functional_extensionality</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">a</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">unfold</span> <span class="id"><a href="common.html#compose">compose</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality">functional_extensionality</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="update_finite_normal_form">update_finite_normal_form</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span>, <span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id">m</span>' /\ <span class="id">m</span>' = (<span class="id"><a href="common.html#update">update</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClass</span> <span class="id">m</span> <span class="id">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> (<span class="id"><a href="common.html#update">update</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id"><a href="common.html#empty">empty</a></span>); <span class="tactic">auto</span>|].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">IHHfinite</span> <span class="id">a0</span> <span class="id">b0</span>) <span class="kwd">as</span> [<span class="id">m</span>' <span class="id">Hnorm</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hnorm</span> <span class="kwd">as</span> [<span class="id">Hnorm</span> <span class="id">Heqm</span>'].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">a0</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span> <span class="id">a0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|].<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality">functional_extensionality</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">a</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pmap_simpl</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="common.html#update">update</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">m</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#partial_map_dec">partial_map_dec</a></span> <span class="id">a</span> <span class="id">m</span>') <span class="kwd">as</span> [<span class="id">HSome</span>|<span class="id">HNone</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">destruct</span> <span class="id">HSome</span> <span class="kwd">as</span> [<span class="id">b</span>' <span class="id">HSome</span>]; <span class="tactic">subst</span>; <span class="id">pmap_simpl</span>; <span class="id">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">apply</span> <span class="id"><a href="fundamental_properties.html#norm_update">norm_update</a></span>; <span class="tactic">auto</span>].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality">functional_extensionality</a></span>; <span class="tactic">intros</span> <span class="id">a</span>'; <span class="id">pmap_simpl</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="common.html#neq_eqb">neq_eqb</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="common.html#eq_dec">eq_dec</a></span> <span class="id">a</span>' <span class="id">a0</span>) <span class="kwd">as</span> [<span class="id">Heqa</span>'|<span class="id">Hneqa</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">subst</span>; <span class="id">pmap_simpl</span>|<span class="id">pmap_simpl</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finite_exists_normal_form">finite_exists_normal_form</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m</span>', <span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id">m</span>' /\ <span class="id">m</span>' = <span class="id"><a href="fundamental_properties.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClass</span> <span class="id">m</span> <span class="id">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exists</span> <span class="id"><a href="common.html#empty">empty</a></span>; <span class="tactic">auto</span>|].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="fundamental_properties.html#update_finite_normal_form">update_finite_normal_form</a></span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finite_normal_form_implies_finite">finite_normal_form_implies_finite</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</div>
<div class="proofscript" id="proof43">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span> <span class="id">HeqClass</span> <span class="id">m</span> <span class="id">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finite_implies_normal_form">finite_implies_normal_form</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#finite_normal_form">finite_normal_form</a></span> <span class="id"><a href="fundamental_properties.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#finite_exists_normal_form">finite_exists_normal_form</a></span> <span class="id">m</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">finite_implies_normal_form</span> <span class="id">finite_exists_normal_form</span> <span class="id">finite_normal_form_implies_finite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">compose_normal_form</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finite_map_composition">finite_map_composition</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>}`{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>}`{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>} (<span class="id">m1</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">C</span> : <span class="kwd">Type</span>} (<span class="id">m2</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span> <span class="id"><a href="fundamental_properties.html#C">C</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> (<span class="id"><a href="common.html#compose">compose</a></span> <span class="id"><a href="fundamental_properties.html#m1">m1</a></span> <span class="id"><a href="fundamental_properties.html#m2">m2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="fundamental_properties.html#compose_normal_form">compose_normal_form</a></span> <span class="id">m1</span> (<span class="id"><a href="fundamental_properties.html#finite_implies_normal_form">finite_implies_normal_form</a></span> <span class="id">m1</span> <span class="id">H1</span>) <span class="id">m2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">andDestruct</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="fundamental_properties.html#finite_normal_form_implies_finite">finite_normal_form_implies_finite</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">peek_pop_simpl</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id"><a href="loo_def.html#peek">peek</a></span> ?ψ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?ϕ |- <span class="id">_</span>] =&gt; <span class="kwd">let</span> ϕ' := <span class="tactic">fresh</span> "ϕ'" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> ψ' := <span class="tactic">fresh</span> "ψ'" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ψ <span class="kwd">as</span> [|ϕ' ψ'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : <span class="id"><a href="loo_def.html#pop">pop</a></span> ?ψ = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?ψ' |- <span class="id">_</span>] =&gt; <span class="kwd">let</span> ϕ' := <span class="tactic">fresh</span> "ϕ'" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> ψ'' := <span class="tactic">fresh</span> "ψ''" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ψ <span class="kwd">as</span> [|ϕ' ψ'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reduction_preserves_config_finiteness">reduction_preserves_config_finiteness</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M">M</a></span> ∙ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">Ha</span>|<span class="id">Ha</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="tactic">destruct</span> <span class="id">Ha</span> <span class="kwd">as</span> [<span class="id">Ha</span>|<span class="id">Ha</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">apply</span> <span class="id"><a href="common.html#fin_update">fin_update</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="fundamental_properties.html#finite_map_composition">finite_map_composition</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">peek_pop_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">peek_pop_simpl</span>;<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">update_</span>ψ<span class="id">_map</span>, <span class="id">update_</span>ϕ<span class="id">_map</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="common.html#fin_update">fin_update</a></span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H9</span>; <span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; [<span class="tactic">subst</span>; <span class="tactic">simpl</span>|]; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">peek_pop_simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; <span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">update_</span>ϕ<span class="id">_contn</span>, <span class="id">update_</span>ϕ<span class="id">_map</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; <span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">peek_pop_simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">update_</span>ϕ<span class="id">_contn</span>, <span class="id">update_</span>ϕ<span class="id">_map</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>; <span class="id">crush</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="common.html#fin_update">fin_update</a></span>.<br/>
&nbsp;&nbsp;<span class="id">peek_pop_simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">peek_pop_simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H8</span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">reduction_preserves_config_finiteness</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reductions_preserves_config_finiteness">reductions_preserves_config_finiteness</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳… σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">reductions_preserves_config_finiteness</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reduction_preserves_config_finiteness">pair_reduction_preserves_config_finiteness</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pair_reduction_preserves_config_finiteness</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reductions_preserves_config_finiteness">pair_reductions_preserves_config_finiteness</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳⋆ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pair_reductions_preserves_config_finiteness</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reduction_preserves_config_not_stuck">reduction_preserves_config_not_stuck</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M">M</a></span> ∙ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not_stuck_</span>σ <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">eexists</span>; <span class="id">crush</span>; <span class="tactic">eauto</span>].<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> ϕ'', (ϕ'::ψ'); <span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not_stuck_</span>ϕ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> σ'; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ϕ', ψ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> ϕ';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not_stuck_</span>ϕ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> σ'; <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> ϕ', ψ';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> ϕ';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not_stuck_</span>ϕ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> ϕ'', ψ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> ϕ'';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not_stuck_</span>ϕ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> ϕ'', ψ'';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> ϕ'';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">not_stuck_</span>ϕ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">reduction_preserves_config_not_stuck</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reductions_preserves_config_not_stuck">reductions_preserves_config_not_stuck</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳… σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">reductions_preserves_config_not_stuck</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reduction_preserves_config_not_stuck">pair_reduction_preserves_config_not_stuck</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pair_reduction_preserves_config_not_stuck</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reductions_preserves_config_not_stuck">pair_reductions_preserves_config_not_stuck</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳⋆ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pair_reductions_preserves_config_not_stuck</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reduction_preserves_config_waiting">reduction_preserves_config_waiting</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M">M</a></span> ∙ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">waiting_</span>σ <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">eexists</span>; <span class="id">crush</span>; <span class="tactic">eauto</span>].<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> ϕ'', (ϕ'::ψ'); <span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">waiting_</span>ψ, <span class="id">waiting_</span>ϕ <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> ϕ'', ψ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> ϕ'';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">waiting_</span>ψ, <span class="id">waiting_</span>ϕ <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exists</span> ϕ'', ψ'';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> ϕ'';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">waiting_</span>ψ, <span class="id">waiting_</span>ϕ <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>.<br/>
&nbsp;&nbsp;<span class="id">peek_pop_simpl</span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">reduction_preserves_config_waiting</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reductions_preserves_config_waiting">reductions_preserves_config_waiting</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳… σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">reductions_preserves_config_waiting</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reduction_preserves_config_waiting">pair_reduction_preserves_config_waiting</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</div>
<div class="proofscript" id="proof56">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pair_reduction_preserves_config_waiting</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reductions_preserves_config_waiting">pair_reductions_preserves_config_waiting</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳⋆ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_</span>σ σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_</span>σ σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</div>
<div class="proofscript" id="proof57">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pair_reductions_preserves_config_waiting</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reduction_preserves_config_wf">reduction_preserves_config_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M">M</a></span> ∙ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</div>
<div class="proofscript" id="proof58">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M</span> σ1 σ2 <span class="id">Hred</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hwf</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">reduction_preserves_config_wf</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reductions_preserves_config_wf">reductions_preserves_config_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳… σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</div>
<div class="proofscript" id="proof59">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">reductions_preserves_config_wf</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reduction_preserves_config_wf">pair_reduction_preserves_config_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</div>
<div class="proofscript" id="proof60">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pair_reduction_preserves_config_wf</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reductions_preserves_config_wf">pair_reductions_preserves_config_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳⋆ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> σ1 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> σ2.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</div>
<div class="proofscript" id="proof61">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">pair_reductions_preserves_config_wf</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="config_head_wf">config_head_wf</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> σ, σ<span class="id">_wf</span> σ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> χ ϕ ψ, σ = (χ, ϕ::ψ) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ<span class="id">_wf</span> (χ, ϕ::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</div>
<div class="proofscript" id="proof62">
&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="loo_def.html#config_wf">config_wf</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_auto</span>; <span class="id">not_stuck_auto</span>; <span class="id">waiting_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="id">crush</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> ϕ, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="id">crush</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> ϕ, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="tactic">split</span>; <span class="tactic">auto</span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">config_head_wf</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="config_wf_decompose">config_wf_decompose</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> σ, σ<span class="id">_wf</span> σ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> χ ϕ ψ, σ = (χ, ϕ::ψ).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</div>
<div class="proofscript" id="proof63">
&nbsp;&nbsp;<span class="tactic">intros</span> σ <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [ϕ <span class="id">Hns</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hns</span> <span class="kwd">as</span> [ψ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">andDestruct</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> σ), ϕ, ψ; <span class="tactic">destruct</span> σ; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_unique">eval_unique</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M</span> σ <span class="id">e</span> <span class="id">v1</span>, <span class="id"><a href="fundamental_properties.html#M">M</a></span> ∙ σ ⊢ <span class="id"><a href="fundamental_properties.html#e">e</a></span> ↪ <span class="id"><a href="fundamental_properties.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v2</span>, <span class="id"><a href="fundamental_properties.html#M">M</a></span> ∙ σ ⊢ <span class="id"><a href="fundamental_properties.html#e">e</a></span> ↪ <span class="id"><a href="fundamental_properties.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#v2">v2</a></span> = <span class="id"><a href="fundamental_properties.html#v1">v1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</div>
<div class="proofscript" id="proof64">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M</span> σ <span class="id">e</span> <span class="id">v1</span> <span class="id">Heval</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Heval</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">solve</span> [<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; [<span class="tactic">eauto</span>| <span class="tactic">eauto</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHeval1</span> <span class="kwd">in</span> <span class="id">H6</span>; <span class="tactic">inversion</span> <span class="id">H6</span>].<br/>
<br/>
<div class="doc">Case 1: eval v </div>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<div class="doc">Case 2: eval x </div>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="id">crush</span>.<br/>
<br/>
<div class="doc">Case 3: e.f </div>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>; <span class="id">crush</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHeval</span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">subst</span>; <span class="id">crush</span>.<br/>
<br/>
<div class="doc">Case 4: e0.g(e) </div>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHeval1</span> <span class="kwd">in</span> <span class="id">H6</span>; <span class="tactic">inversion</span> <span class="id">H6</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H8</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H11</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHeval2</span> <span class="kwd">in</span> <span class="id">H13</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHeval3</span> <span class="kwd">in</span> <span class="id">H14</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
<br/>
<div class="doc">Case 5: e1 = e2 </div>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHeval1</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">apply</span> <span class="id">IHHeval2</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">subst</span>; <span class="id">crush</span>.<br/>
<br/>
<div class="doc">Case 6: e1 ≠ e2 </div>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHHeval1</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">apply</span> <span class="id">IHHeval2</span> <span class="kwd">in</span> <span class="id">H7</span>; <span class="tactic">subst</span>; <span class="id">crush</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Rewrite</span> <span class="id"><a href="fundamental_properties.html#eval_unique">eval_unique</a></span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">eval_rewrite</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span> : ?<span class="id">M</span> ∙ ?σ ⊢ ?<span class="id">e</span> ↪ ?<span class="id">v1</span>, <span class="id">H2</span> : ?<span class="id">M</span> ∙ ?σ ⊢ ?<span class="id">e</span> ↪ ?<span class="id">v2</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="fundamental_properties.html#eval_unique">eval_unique</a></span> <span class="id">M</span> σ <span class="id">e</span> <span class="id">v1</span> <span class="id">H1</span>) <span class="kwd">in</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unique_interpretation_x">unique_interpretation_x</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> σ <span class="id">v1</span>, ⌊ <span class="id"><a href="fundamental_properties.html#x">x</a></span> ⌋ σ ≜ <span class="id"><a href="fundamental_properties.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v2</span>, ⌊ <span class="id"><a href="fundamental_properties.html#x">x</a></span> ⌋ σ ≜ <span class="id"><a href="fundamental_properties.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#v2">v2</a></span> = <span class="id"><a href="fundamental_properties.html#v1">v1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</div>
<div class="proofscript" id="proof65">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> σ <span class="id">v1</span> <span class="id">Hint1</span> <span class="id">v2</span> <span class="id">Hint2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hint1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hint2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="kwd">in</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H7</span> <span class="kwd">in</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">unique_interpretation_</span>Σ :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> Σ σ α<span class="id">s1</span>, ⌊ Σ ⌋ σ ≜′ α<span class="id">s1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> α<span class="id">s2</span>, ⌊ Σ ⌋ σ ≜′ α<span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;α<span class="id">s2</span> = α<span class="id">s1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</div>
<div class="proofscript" id="proof66">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">x</span> σ α1 <span class="id">Hint1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hint1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> α<span class="id">s2</span> <span class="id">Hint2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hint2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="fundamental_properties.html#unique_interpretation_x">unique_interpretation_x</a></span> <span class="id">x</span> σ α) <span class="kwd">in</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">IHHint1</span> α<span class="id">s0</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">interpretation_rewrite</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span> : ⌊ ?<span class="id">x</span> ⌋ ?σ ≜ ?<span class="id">v1</span>, <span class="id">H2</span> : ⌊ ?<span class="id">x</span> ⌋ ?σ ≜ ?<span class="id">v2</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="fundamental_properties.html#unique_interpretation_x">unique_interpretation_x</a></span> <span class="id">x</span> σ <span class="id">v1</span> <span class="id">H1</span>) <span class="kwd">in</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span> : ⌊ ?Σ ⌋ ?σ ≜′ ?α<span class="id">s1</span>, <span class="id">H2</span> : ⌊ ?Σ ⌋ ?σ ≜′ ?α<span class="id">s2</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id">unique_interpretation_</span>Σ Σ σ α<span class="id">s1</span> <span class="id">H1</span>) <span class="kwd">in</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">wf_</span>σ<span class="id">_explode</span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> σ, σ<span class="id">_wf</span> σ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> χ ψ ϕ, σ = (χ, ϕ::ψ) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> (<span class="id"><a href="loo_def.html#vMap">vMap</a></span> ϕ) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> ϕ', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> ϕ' ψ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="common.html#finite">finite</a></span> (<span class="id"><a href="loo_def.html#vMap">vMap</a></span> ϕ')) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loo_def.html#not_stuck">not_stuck</a></span> (<span class="id"><a href="loo_def.html#contn">contn</a></span> ϕ) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> ϕ', <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> ϕ' ψ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="loo_def.html#waiting">waiting</a></span> (<span class="id"><a href="loo_def.html#contn">contn</a></span> ϕ')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</div>
<div class="proofscript" id="proof67">
&nbsp;&nbsp;<span class="tactic">intros</span> σ <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hwf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> σ <span class="kwd">as</span> [χ ψ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">not_stuck_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">waiting_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">crush</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">config_wf_destruct</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span> : σ<span class="id">_wf</span> ?σ |-<span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">wf_</span>σ<span class="id">_explode</span> <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> χ := <span class="tactic">fresh</span> "χ" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> ψ := <span class="tactic">fresh</span> "ψ" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> ϕ := <span class="tactic">fresh</span> "ϕ" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hwf</span> := <span class="tactic">fresh</span> "<span class="id">Hwf</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [χ <span class="id">Hwf</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwf</span> <span class="kwd">as</span> [ψ <span class="id">Hwf</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwf</span> <span class="kwd">as</span> [ϕ <span class="id">Hwf</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Htmp</span> := <span class="tactic">fresh</span> "<span class="id">Htmp</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hfinite</span>ϕ := <span class="tactic">fresh</span> "<span class="id">Hfinite</span>ϕ" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hfinite</span>ψ := <span class="tactic">fresh</span> "<span class="id">Hfinite</span>ψ" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hnot_stuck</span> := <span class="tactic">fresh</span> "<span class="id">Hnot_stuck</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">Hwaiting</span> := <span class="tactic">fresh</span> "<span class="id">Hwaiting</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwf</span> <span class="kwd">as</span> [<span class="id">Htmp</span> <span class="id">Hwf</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwf</span> <span class="kwd">as</span> [<span class="id">Hfinite</span>ϕ <span class="id">Hwf</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwf</span> <span class="kwd">as</span> [<span class="id">Hfinite</span>ψ <span class="id">Hwf</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hwf</span> <span class="kwd">as</span> [<span class="id">Hnot_stuck</span> <span class="id">Hwaiting</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> σ<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="one_to_one">one_to_one</a></span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} `{<span class="id"><a href="common.html#Eq">Eq</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span>} (<span class="id">m</span> : <span class="id"><a href="common.html#partial_map">partial_map</a></span> <span class="id"><a href="fundamental_properties.html#A">A</a></span> <span class="id"><a href="fundamental_properties.html#B">B</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">b</span>, <span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#a1">a1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#m">m</a></span> <span class="id"><a href="fundamental_properties.html#a2">a2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="fundamental_properties.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#a1">a1</a></span> = <span class="id"><a href="fundamental_properties.html#a2">a2</a></span>.<br/>
<br/>
<div class="doc">TODO: </div>
<span class="kwd">Parameter</span> <span class="id"><a name="function_neq_exists_neq_mapping">function_neq_exists_neq_mapping</a></span>  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} (<span class="id">f1</span> <span class="id">f2</span> : <span class="id"><a href="fundamental_properties.html#A">A</a></span> -&gt; <span class="id"><a href="fundamental_properties.html#B">B</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#f1">f1</a></span> &lt;&gt; <span class="id"><a href="fundamental_properties.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">a</span>, <span class="id"><a href="fundamental_properties.html#f1">f1</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span> &lt;&gt; <span class="id"><a href="fundamental_properties.html#f2">f2</a></span> <span class="id"><a href="fundamental_properties.html#a">a</a></span>.<br/>
<br/>
<br/>
<div class="doc">This theorem is not currently provable since there is not restriction on what the fresh variables could be. I can change this so that the fresh variables are deterministic during adaptation </div>
<span class="kwd">Theorem</span> <span class="id"><a name="adaptation_unique">adaptation_unique</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> σ1 σ2 σ, σ1 ◁ σ2 ≜ σ -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> σ', σ1 ◁ σ2 ≜ σ' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;σ' = σ.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</div>
<div class="proofscript" id="proof68">
&nbsp;&nbsp;<span class="tactic">intros</span> σ1 σ2 σ <span class="id">Hadapt1</span> σ' <span class="id">Hadapt2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hadapt1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Hadapt2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">peek_pop_simpl</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H16</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Admitted.</div>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">adapt_rewrite</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span> : ?σ1 ◁ ?σ2 ≜ ?σ, <span class="id">H2</span> : ?σ1 ◁ ?σ2 ≜ ?σ' |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="fundamental_properties.html#adaptation_unique">adaptation_unique</a></span> σ1 σ2 σ <span class="id">H1</span>) <span class="kwd">in</span> <span class="id">H2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_reductions_transitive">pair_reductions_transitive</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳⋆ σ2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> σ3, <span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ2 ⤳⋆ σ3 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="fundamental_properties.html#M1">M1</a></span> ⦂ <span class="id"><a href="fundamental_properties.html#M2">M2</a></span> ⦿ σ1 ⤳⋆ σ3.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</div>
<div class="proofscript" id="proof69">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">M1</span> <span class="id">M2</span> σ1 σ2 <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">Hred</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
