%proposed replacement for discussion

%\kjx{could be two subsetions or one section}

\subsection{Examplars}

The design of \Chainmail was guided by the study of a sequence of
exemplars taken from the object-capability literature and the smart
contracts world.  
Space does not permit us to include more example specifications in any
detail in this paper, however 
%
Table~\ref{table} lists four exemplar specifications that we present as
appendices \cite{examples}. Our design was also driven by work on other
examples such as the membrane \cite{membranesJavascript},
the Mint/Purse \cite{MillerPhD}, the Escrow \cite{proxiesECOOP2013,swapsies}.

\begin{table}
  \begin{tabular}{|l|l|}
    \hline
\textbf{Bank} \cite{arnd18} & Bank and Account as in
Section~\ref{sect:motivate:Bank} with two different implementations.\\
\hline
\textbf{ERC20} \cite{ERC20} &   Ethereum-based token contract.\\
\hline
\textbf{DAO} \cite{Dao,DaoBug} & Ethereum contract for Decentralised Autonomous
Organisation.\\
\hline
\textbf{DOM} \cite{dd,ddd} & Restricting access to browser Domain Object Model\\
    \hline
  \end{tabular}

  ~\\
  
  \caption{Examplar specifications \cite{examples}}
  \label{table}
\end{table}





\subsection{Model}


We have constructed a Coq model \cite{examples} of the core of the Chainmail
specification language, along with the underlying \LangOO language.
Our formalism is organised as follows:
\begin{enumerate}
\item
The \LangOO Language: a class based, object oriented language with mutable references.
\item
Chainmail: The fulll assertion syntax and semantics defined in Definitions \ref{def:execution:internal:external}, \ref{def:arise}, \ref{def:valid:assertion:access}, \ref{def:valid:assertion:control}, \ref{def:valid:assertion:view}, \ref{def:restrict}, \ref{def:valid:assertion:space}, \ref{def:config:adapt}, \ref{def:valid:assertion:time} and \ref{def:module_satisfies}.
\item
\LangOO Properties: Secondary properties of the loo language the aid in reasoning about its semantics.
\item
Chainmail Properites: The core properties defined on the semantics of Chainmail.
\end{enumerate}

We formalise several of the properties defined in this paper. Table \ref{Coq} enumerates the properties of Chainmail we have formalised in Coq.

\begin{table}
  \begin{tabular}{|l|l|l|l|}
    \hline

\textbf{Lemma \ref{lemma:linking} (and 3)} &
Properties of Linking
        & 
\parbox{.45\textwidth}{\scriptsize\begin{enumerate}[label={(\arabic*)}]
            \item \texttt{moduleLinking\_associative}
            \item \texttt{moduleLinking\_commutative\_1}
            \item \texttt{moduleLinking\_commutative\_2}
            \item \texttt{linking\_preserves\_reduction}
        \end{enumerate}}
        \\
\hline
\textbf{Lemma \ref{lemma:classic}} &   
\parbox{.45\textwidth}{\scriptsize\begin{enumerate}[label={(\arabic*)}]
            \item $A \wedge \neg A \equiv \texttt{false}$
            \item $A \vee \neg A \equiv \texttt{true}$
            \item $A \vee A' \equiv A' \wedge A$
            \item $A \wedge A' \equiv A' \wedge A$
            \item $(A \vee A') \vee A'' \equiv A \vee (A' \vee A'')$
        \end{enumerate}}
        & 
\parbox{.45\textwidth}{\scriptsize\begin{enumerate}[label={(\arabic*)}]
            \item \texttt{sat\_and\_nsat\_equiv\_false}
            \item -
            \item \texttt{and\_commutative}
            \item \texttt{or\_commutative}
            \item \texttt{or\_associative}
        \end{enumerate}}
        \\
\hline
\textbf{Lemma \ref{lemma:basic_assertions_classical}} &   
\parbox{.45\textwidth}{\scriptsize\begin{enumerate}[label={(\arabic*)}]
            \item $A \wedge \neg A \equiv \texttt{false}$
            \item $A \vee \neg A \equiv \texttt{true}$
            \item $A \vee A' \equiv A' \wedge A$
            \item $A \wedge A' \equiv A' \wedge A$
            \item $(A \vee A') \vee A'' \equiv A \vee (A' \vee A'')$
            \item $(A \vee A') \wedge A'' \equiv (A \vee A'') \wedge (A' \vee A'')$
            \item $(A \wedge A') \vee A'' \equiv (A \wedge A'') \vee (A' \wedge A'')$
            \item $\neg (A \wedge A') \equiv (\neg A \vee \neg A')$
            \item $\neg (A \vee A') \equiv (\neg A \wedge \neg A')$
            \item $\neg (\exists x.A) \equiv \forall x. (\neg A)$
            \item $\neg (\exists S.A) \equiv \forall S. (\neg A)$
            \item $\neg (\forall x.A) \equiv \exists x. (\neg A)$
            \item $\neg (\forall S.A) \equiv \exists S. (\neg A)$
        \end{enumerate}}
        & 
\parbox{.45\textwidth}{\scriptsize\begin{enumerate}[label={(\arabic*)}]
            \item \texttt{sat\_and\_nsat\_equiv\_false}
            \item -
            \item \texttt{and\_commutative}
            \item \texttt{or\_commutative}
            \item \texttt{or\_associative}
            \item \texttt{and\_distributive}
            \item \texttt{or\_distributive}
            \item \texttt{neg\_distributive\_and}
            \item \texttt{neg\_distributive\_or}
            \item \texttt{not\_ex\_x\_all\_not}
            \item \texttt{not\_ex\_$\Sigma$\_all\_not}
            \item \texttt{not\_all\_x\_ex\_not}
            \item \texttt{not\_all\_$\Sigma$\_ex\_not}
        \end{enumerate}}
\\
\hline
  \end{tabular}
  \caption{Chainmail Properties Formalised in Coq}
  \label{Coq}
\end{table}

We have proven that Chainmail obeys much of the properties of classical logic. While formalise most of the underlying semantics, we make several assumptions in our Coq formalism: (i) the law of the excluded middle,  a property that is well known to be unprovable in constructive logics, and (ii) the equality of variable maps and heaps down to renaming. Coq formalisms often require fairly verbose definitions and proofs of properties involving variable substitution and renaming.

More details of the formal foundations of \Chainmail, and the model,
are also in appendices \cite{examples}.

